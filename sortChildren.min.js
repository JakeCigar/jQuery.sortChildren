!function($){"use strict";$.fn.sortChildren=function(t){var e=$.isPlainObject(t)?$.extend({cmp:function(){return $(this).text()},ignoreFirst:0,ignoreLast:0,reverse:!1},t):{cmp:arguments[0],ignoreFirst:arguments[1],ignoreLast:arguments[2],reverse:arguments[3]};return this.each(function(){var t=$(this),r=$.makeArray(t.children()),n=r.splice(0,e.ignoreFirst||0),i=r.splice(-(e.ignoreLast||0),e.ignoreLast);$.each(r.sort(e.cmp),function(r,n){e.reverse?t.prepend(n):t.append(n)}),t.prepend(n).append(i)})},$.fn.sortTable=function(){return this.each(function(){var t=$("thead th",this).map(function(t){return $.sortKeys.call(0,$(this).data("sort")||[{childAlpha:t}])}).get();console.log(t),$("thead th",this).click(function(){var e=$(this).closest("table").children("tbody"),r=$(this).index(),n=$(this).hasClass("sorted");n&&$(this).toggleClass("reversed").siblings().removeClass("sorted reversed"),$(this).addClass("sorted").siblings().removeClass("sorted reversed"),e.sortChildren({cmp:t[r],reverse:$(this).hasClass("reversed")})}).attr("title","sortable").first().click()})},$.sortKeys=function(t){return $.sortFunc($.isArray(t)?$.map(t,function(t,e){return $.map(t,function(t,e){return $.sortFunc[e](t)})}):$.map(arguments,function(t,e){return t?$.sortFunc[t](e):void 0}))},$.sortFunc=$.extend(function(t,e){var e=e||[],r=t.map(function(t){if($.isFunction(t))return e.push(""),t;var r=t.split("::"),n={},i=1==r.length?[]:r[1].toLowerCase().split(" ");return i.map(function(t){n[t]=!0}),e.push(n),new Function("return "+r[0])});return function(t,n){for(var i=0;i<r.length;i++){var s=r[i],u=s.call(t),c=s.call(n);e[i].numeric&&(u=+u,c=+c);var o=e[i].reverse?-1:1;if(c>u)return-1*o;if(u>c)return 1*o}return 0}},{numeric:function(){return+$(this).text()},alpha:function(){return $(this).text()},reverseNumeric:function(){return-+$(this).text()},reverseAlpha:"$(this).text()::reverse",childNumeric:function(t){return function(){return parseInt($.trim($(this).children().eq(t).text()))}},childReverseNumeric:function(t){return function(){return-parseInt($.trim($(this).children().eq(t).text()))}},childAlpha:function(t){return function(){return $.trim($(this).children().eq(t).text())}}})}(jQuery);